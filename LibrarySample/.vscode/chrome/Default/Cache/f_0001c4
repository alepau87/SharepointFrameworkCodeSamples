(function(ns){var BEGIN_END_SPACES_REGEX=/^[\s\xA0]+|[\s\xA0]+$/g,ALL_SPACES_REGEX=/[\s\xA0]+/g,CUSTOM_VAR_REGEX=/^([^\.]+)\.([^\s]+)$/,DL_PREFIX="custom.",mapped_actions={},listVar=[["Google Analytics - Property ID","datalayer",{name:"applicationInfo.googleAnalyticsID"}],["Google Analytics - Domain","datalayer",{name:"applicationInfo.googleAnalyticsDomain"}],["Application - Channel","datalayer",{name:"applicationInfo.channel"}],["Application - SiteCode","datalayer",{name:"applicationInfo.siteCode"}],["Application - Language","datalayer",{name:"applicationInfo.language"}],["PageView - Url","datalayer",{name:"eventData.url"}],["ApplicationEvent - Category","datalayer",{name:"eventData.category"}],["ApplicationEvent - Action","datalayer",{name:"eventData.eventAction"}],["ApplicationEvent - Label","datalayer",{name:"eventData.label"}],["GA_customVar - varIndex","datalayer",{name:"eventData.varIndex"}],["GA_customVar - varName","datalayer",{name:"eventData.varName"}],["GA_customVar - value","datalayer",{name:"eventData.value"}],["custom.ApplicationEvent - Value","datalayer",{name:"eventData.value"}],["TCOrigin","datalayer",{name:"businessData.origin"}],["TCDestination","datalayer",{name:"businessData.destination"}],["TCDepartureDate","datalayer",{name:"businessData.departureDate"}],["TCArrivalDate","datalayer",{name:"businessData.arrivalDate"}],["TCNbAdults","datalayer",{name:"businessData.nbrOfAdults"}],["TCServiceClass","datalayer",{name:"businessData.serviceClass"}],["TCAirlineCode","datalayer",{name:"businessData.airlineCode"}],["TCProductType","datalayer",{name:"eventData.segmentType"}],["TCNbChildren","datalayer",{name:"businessData.nbrOfChildren"}],["TCHotelCity","datalayer",{name:"businessData.hotelCity"}],["TCCheckInDate","datalayer",{name:"businessData.checkInDate"}],["TCCheckOutDate","datalayer",{name:"businessData.checkOutDate"}],["TCHotelName","datalayer",{name:"businessData.hotelName"}],["TCRoomRate","datalayer",{name:"businessData.rate"}],["TCRoomType","datalayer",{name:"businessData.roomType"}],["TCCarProvider","datalayer",{name:"businessData.carProvider"}],["TCPickUp","datalayer",{name:"businessData.pickUpLocation"}],["TCDropOff","datalayer",{name:"businessData.dropOffLocation"}],["TCCarClassCode","datalayer",{name:"businessData.carClassCode"}],["TCComputedDepartureDate","function",'function() { var returnDate = ""; if ({TCDepartureDate} && {TCDepartureDate}.length > 0) { returnDate = {TCDepartureDate}.substring(0,4)+"-"+{TCDepartureDate}.substring(4,6)+"-"+{TCDepartureDate}.substring(6,8);} return returnDate; }'],["TCComputedArrivalDate","function",'function() { var returnDate = ""; if ({TCArrivalDate} && {TCArrivalDate}.length > 0) { returnDate = {TCArrivalDate}.substring(0,4)+"-"+{TCArrivalDate}.substring(4,6)+"-"+{TCArrivalDate}.substring(6,8);} return returnDate; }'],["TCComputedCheckInDate","function",'function() { var returnDate = ""; if ({TCCheckInDate} && {TCCheckInDate}.length > 0) { returnDate = {TCCheckInDate}.substring(0,4)+"-"+{TCCheckInDate}.substring(4,6)+"-"+{TCCheckInDate}.substring(6,8);} return returnDate; }'],["TCComputedCheckOutDate","function",'function() { var returnDate = ""; if ({TCCheckOutDate} && {TCCheckOutDate}.length > 0) { returnDate = {TCCheckOutDate}.substring(0,4)+"-"+{TCCheckOutDate}.substring(4,6)+"-"+{TCCheckOutDate}.substring(6,8);} return returnDate; }'],["TCProfileId","function","function() { var profileId=\"\"; if (typeof modules !== 'undefined' && typeof modules.profile !== 'undefined' && typeof modules.profile.utils !== 'undefined' && typeof modules.profile.utils.NotificationUtils !== 'undefined' && typeof modules.profile.utils.NotificationUtils.profileInfo !== 'undefined') { profileId=modules.profile.utils.NotificationUtils.profileInfo.uniqueID[0].iD; } return profileId; }"],["IsUserLogged","function","function() { var opsId = {TCProfileId}; var flag=false; if (typeof opsId === 'string' && opsId != null && opsId.length > 0) { flag = true; } return flag; }"],["DepartureDateInFuture","function","function() { var depDate=new Date({TCComputedDepartureDate}); var curDate=new Date(); return (depDate>=curDate); }"]],action_list=[[{url:":cmtng"},{event:"custom",eventName:"PageView"},{tracker:"ga",data:[["_setAccount","custom.Google Analytics - Property ID"],["_trackPageview","custom.PageView - Url"]]}],[{url:":cmtng"},{event:"custom",eventName:"GA_customVar"},{tracker:"ga",data:[["_setAccount","custom.Google Analytics - Property ID"],["_setCustomVar","1","SiteCode","custom.GA_customVar - value","2"],["_trackPageview"]]}],[{url:":cmtng"},{event:"custom",eventName:"ApplicationEvent"},{tracker:"ga",data:[["_setAccount","custom.Google Analytics - Property ID"],["_trackEvent","custom.ApplicationEvent - Category","custom.ApplicationEvent - Action","custom.ApplicationEvent - Label","custom.custom.ApplicationEvent - Value"]]}],[{url:":cmtng/index","custom.DepartureDateInFuture":"1","custom.TCProductType":"AIR"},{event:"custom",eventName:"bookingElement"},{tracker:"sojern",script:"https://pixel.sojern.com/partner/74nQzQmLQmHMj7JE/fc",partnerId:"74nQzQmLQmHMj7JE",action:"fc",data:[["fa1","custom.TCOrigin"],["fa2","custom.TCDestination"],["fd1","custom.TCComputedDepartureDate"],["fd2","custom.TCComputedArrivalDate"],["t","custom.TCNbAdults"],["fc","custom.TCServiceClass"],null,null,null,["fal1","custom.TCAirlineCode"],["fal2","custom.TCAirlineCode"]]}],[{url:":cmtng/index","custom.TCProductType":"AIR"},{event:"custom",eventName:"bookingElement"},{tracker:"amadeus",data:[["setTrackerUrl","https://trackerprd.1aipp.com/piwik.php"],["setSiteId","4"],null,["setEvent","DisplayTrip","page"],["setProductType","custom.TCProductType","page"],null,["setStartLocationCityCode","custom.TCOrigin","page"],["setEndLocationCityCode","custom.TCDestination","page"],["setStartDate","custom.TCComputedDepartureDate","page"],["setEndDate","custom.TCComputedArrivalDate","page"],null,null,["setNumberOfAdults","custom.TCNbAdults","page"],["setNumberOfChildren","custom.TCNbChildren","page"],null,null,null,null,["setClassOfService","custom.TCServiceClass","page"],null,null,null,null,null,null,null,null,null,null,["setOpsId","custom.TCProfileId","visit"],null,null,null,null,null,null,null,null,null,null,["trackPageView","custom.PageView - Url"]]}],[{url:":cmtng/index","custom.TCProductType":"HOTEL"},{event:"custom",eventName:"bookingElement"},{tracker:"amadeus",data:[["setTrackerUrl","https://trackerprd.1aipp.com/piwik.php"],["setSiteId","4"],null,["setEvent","DisplayTrip","page"],["setProductType","custom.TCProductType","page"],["setProductName","custom.TCHotelName","page"],["setStartLocationCityCode","custom.TCHotelCity","page"],null,["setStartDate","custom.TCComputedCheckInDate","page"],["setEndDate","custom.TCComputedCheckOutDate","page"],null,null,null,null,null,null,null,null,null,null,null,["setRoomType","custom.TCRoomType","page"],null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,["trackPageView","custom.PageView - Url"]]}],[{url:":cmtng/index","custom.TCProductType":"AIR"},{event:"custom",eventName:"bookingElement"},{tracker:"adara",script:"https://tag.yieldoptimizer.com/ps/ps",data:[["t","s"],["p","1914"],["u","XXX"],["boac","custom.TCOrigin"],["bdac","custom.TCDestination"],["bpdt","custom.TCComputedDepartureDate"],["brdt","custom.TCComputedArrivalDate"],["bap","custom.TCAirlineCode"],["bna","custom.TCNbAdults"],["bnc","custom.TCNbChildren"],["bcls","custom.TCServiceClass"]]}],[{url:":cmtng/index","custom.TCProductType":"HOTEL"},{event:"custom",eventName:"bookingElement"},{tracker:"adara",script:"https://tag.yieldoptimizer.com/ps/ps",data:[["t","s"],["p","1914"],["u","XXX"],null,null,null,null,null,null,null,null,null,null,["bhna","custom.TCHotelName"],["bhcty","custom.TCHotelCity"],null,["bhcid","custom.TCComputedCheckInDate"],["bhcod","custom.TCComputedCheckOutDate"],["bhrr","custom.TCRoomRate"],["bhrty","custom.TCRoomType"]]}],[{url:":cmtng/index","custom.TCProductType":"CAR"},{event:"custom",eventName:"bookingElement"},{tracker:"amadeus",data:[["setTrackerUrl","https://trackerprd.1aipp.com/piwik.php"],["setSiteId","4"],null,["setEvent","DisplayTrip","page"],["setProductType","custom.TCProductType","page"],["setProductName","custom.TCCarProvider","page"],["setStartLocationCityCode","custom.TCPickUp","page"],["setEndLocationCityCode","custom.TCDropOff","page"],["setStartDate","custom.TCComputedDepartureDate","page"],["setEndDate","custom.TCComputedArrivalDate","page"],null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,["setCarCategory","custom.TCCarClassCode","page"],null,null,null,null,null,null,null,null,null,null,null,null,null,["trackPageView","custom.PageView - Url"]]}],[{url:":cmtng/index","custom.TCProductType":"CAR"},{event:"custom",eventName:"bookingElement"},{tracker:"adara",script:"https://tag.yieldoptimizer.com/ps/ps",data:[["t","s"],["p","1914"],["u","XXX"],null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,["bcp","custom.TCCarProvider"],["bcpu","custom.TCPickUp"],["bcdol","custom.TCDropOff"],["bcpud","custom.TCComputedDepartureDate"],["bcdod","custom.TCComputedArrivalDate"],["bcrcl","custom.TCCarClassCode"]]}],[{url:":cmtng/index","custom.TCProductType":"AIR"},{event:"custom",eventName:"bookingElement"},{tracker:"ta",data:[["_setAccount","9000"],["_setDataSource","pb"],["_setLevel","1"],["_setLanguage","en"],["_setProduct","5"],["_setDepartureAirport","custom.TCOrigin"],["_setDestinationAirport","custom.TCDestination"],["_setDateFrom","custom.TCComputedDepartureDate"],["_setDateTo","custom.TCComputedArrivalDate"],["_setAdults","custom.TCNbAdults"],["_setChildren","custom.TCNbChildren"],null,null,["_setFlightClass","custom.TCServiceClass"],null,null,null,null,null,null,["_track",""]]}],[{url:":cmtng/index","custom.TCProductType":"AIR"},{event:"custom",eventName:"bookingElement"},{tracker:"krux",script:"cdn.krxd.net/controltag?confid=Kah3Uh2C",partnerId:"Kah3Uh2C",data:[null]}],[{url:":cmtng/index","custom.TCProductType":"HOTEL"},{event:"custom",eventName:"bookingElement"},{tracker:"krux",script:"cdn.krxd.net/controltag?confid=Kah3Uh2C",partnerId:"Kah3Uh2C",data:[null]}],[{url:":cmtng/index","custom.TCProductType":"CAR"},{event:"custom",eventName:"bookingElement"},{tracker:"krux",script:"cdn.krxd.net/controltag?confid=Kah3Uh2C",partnerId:"Kah3Uh2C",data:[null]}]],calledOnready=false,onreadyCallBacks=[],endsWith=function(str,suffix){return str.indexOf(suffix,str.length-suffix.length)!==-1},startsWith=function(str,prefix){return this.indexOf(str)==0},isInt=function(value){return !isNaN(value)&&parseInt(Number(value))==value&&!isNaN(parseInt(value,10))},globVar=function(name,var_value,overwrite){var parts=name.match(CUSTOM_VAR_REGEX),context=window;if(parts){context=globVar(parts[1],{});name=parts[2];parts=name.match(CUSTOM_VAR_REGEX);while(parts){if(!context.hasOwnProperty(parts[1])){context[parts[1]]={}}context=context[parts[1]];name=parts[2];parts=name.match(CUSTOM_VAR_REGEX)}}else{context.eval&&(1,context.eval)("var "+name+";")}var a=context[name];if(typeof var_value!=="undefined"){if(typeof overwrite!=="undefined"&&overwrite==1){context[name]=var_value}else{context[name]=(typeof a==="undefined")?var_value:a}}return context[name]},datalayer=globVar("_tcDataLayer",{}),get_InnerText=function(element){var text="";element&&(text=(element.innerText||element.textContent||""));text&&(text=text.replace(ALL_SPACES_REGEX," "));text&&text!=" "&&(text=text.replace(BEGIN_END_SPACES_REGEX,""));return text},getElemById=function(e){var elem=document.getElementById(e);if(elem&&elem.parentNode){if(get_attrib(elem,"id")!==e){for(var i=1;i<document.all[e].length;i++){if(get_attrib(document.all[e][i],"id")==e){return document.all[e][i]}}}}return elem},get_attrib=function(element,attrib){if(element&&(typeof element.attributes!="undefined")&&attrib&&element.attributes[attrib]){return element.attributes[attrib].value}else{return null}},decodeCommonAttributes=function(e){var ret={element:e,id:get_attrib(e,"id")||"",name:get_attrib(e,"name")||"",className:e.className,href:get_attrib(e,"href")||"",url:window.location.href,host:window.location.host,path:window.location.pathname};return ret},getElemByName=function(e){if(typeof document.getElementsByName!=="undefined"){var tab=document.getElementsByName(e);if((tab.length>0)&&tab[0]){return tab[0]}}},getElemByClassName=function(e){if(typeof document.getElementsByClassName!=="undefined"){var tab=document.getElementsByClassName(e);if((tab.length>0)&&tab[0]){return tab[0]}}},Action=function(track,tn,sc){this.conditions={};this.trackerName=tn;this.script=sc;this.varList=[];this.trackerCallback=track},TrackerFactory=function(){this.loadedList={};this.queue={};this.scripts=[]},InvocationFactory=function(){this.scripts={}},StaticFactory=function(){this.scripts=[]},GenericFactory=function(){},parseActions=function(actions,p_actions){for(var i=0;i<actions.length;++i){try{var event,e=actions[i],conditions=e&&e[0],onevent=e&&e[1],pushedAction=e&&e[2],f=onevent&&onevent.event,g=pushedAction&&pushedAction.tracker,h=pushedAction&&pushedAction.data,s=pushedAction&&pushedAction.script;if(g&&tracker_list.hasOwnProperty(g)&&h.length>0){var a=new Action(tracker_list[g],g,s);for(var c in conditions){a.conditions[c]=conditions[c]}if(f){for(var c in onevent){if(c!="event"){a.conditions[c]=onevent[c]}}event=f}else{}for(var k=0;k<h.length;k++){if(h[k]&&Object.prototype.toString.call(h[k])=="[object Array]"&&h[k].length>0){var res=[];for(var j=0;j<h[k].length;j++){if(h[k][j]&&Object.prototype.toString.call(h[k][j])=="[object String]"){res.push(h[k][j])}}(res.length>0)&&a.varList.push(res)}}tracker_list[g].init(g,h,s);p_actions.hasOwnProperty(event)&&p_actions[event].push(a)}else{}}catch(err){}}queueTracker.load();staticTracker.load();genericTracker.load()},actionManager=function(e){if(event_list.indexOf(e.originator)>-1){var f=event_list.indexOf(e.originator),mapped=f>-1&&mapped_actions[e.originator];for(var i=0;i<mapped.length;i++){try{var a=mapped[i];if(a.check(e)){a.execute()}}catch(err){}}}},CustomVar=function(a){this.name=a[0];this.value=(a[1]&&(a[1]=="function")&&a[2])||null;var b=a[2];this.selector={};this.selector.type=a[1]||null;this.selector.id=(b&&b.id);this.selector.name=(b&&b.name)||null;this.selector.classname=(b&&b.classname)||null},loadCustomVar=function(varname){var s=globVar("_tcDataLayer",{}),ret="";for(var i=0;i<listVar.length;i++){if(varname==listVar[i][0]){var a=new CustomVar(listVar[i]),val=a&&a.extract()&&a.name&&a.value;ret=val||"";return ret}}return""},clickSource=function(e){var sender=(e&&e.target)||(window.event&&window.event.srcElement);return sender},addListener=function(event,action){if(document.addEventListener){document.addEventListener(event,action,false)}else{document["on"+event]=action}},eventMapper={link:{event:"click",activated:true,callback:function(e){var src=clickSource(e),authorized=false;src&&(src.tagName.toLowerCase()=="a")&&(e.which)&&(e.which!=3)&&(authorized=true);if(authorized){var element_att=decodeCommonAttributes(src);element_att.href=src.href||"";element_att.originator="link";actionManager(element_att)}else{src&&((src.tagName.toLowerCase()=="button")||((src.tagName.toLowerCase()=="input")&&(src.type.toLowerCase()=="submit")))&&(e.which)&&(e.which!=3)&&(authorized=true);if(authorized){var element_att=decodeCommonAttributes(src);element_att.originator="button";actionManager(element_att)}else{var element_att=decodeCommonAttributes(src);element_att.originator="css";element_att.node=src;actionManager(element_att)}}}},custom:{event:"custom1A",activated:true,callback:function(e){var eventName=e&&e.detail&&e.detail.eventName,element_att={originator:"custom",url:window.location.href,host:window.location.host,path:window.location.pathname,eventName:eventName};actionManager(element_att)}},load:{event:"load",activated:true,callback:function(){var element_att={originator:"load",url:window.location.href,host:window.location.host,path:window.location.pathname};actionManager(element_att)}},form:{event:"submit",activated:true,callback:function(e){var src=clickSource(e),authorized=false;src&&(src.tagName.toLowerCase()=="form")&&(authorized=true);if(authorized){var element_att=decodeCommonAttributes(src);element_att.originator="form";actionManager(element_att)}}}},addOnReadyCallBack=function(a){if(calledOnready){a()}else{onreadyCallBacks.push(a)}},loadOnReady=function(){var excuteCallBacks=function(){for(var i=0;i<onreadyCallBacks.length;i++){if(typeof onreadyCallBacks[i]==="function"){onreadyCallBacks[i]()}}},ready=function(){if((document.readyState==="complete"||document.readyState==="loaded")&&!calledOnready){calledOnready=true;excuteCallBacks()}},tryScroll=function(){if(calledOnready){return}try{document.documentElement.doScroll("left");ready()}catch(e){setTimeout(tryScroll,40)}};if(document.addEventListener){document.addEventListener("DOMContentLoaded",ready,false)}else{if(document.attachEvent){var isFrame=true;try{isFrame=window.frameElement!=null}catch(e){}if(document.documentElement.doScroll&&!isFrame){tryScroll()}}}addListener("readystatechange",ready);addListener("load",ready)},addSsl=function(a,b,c){return(document.location.protocol==="https:"?a:b)+c},addScript=function(a){var c=document.createElement("script");c.type="text/javascript";c.async=true;c.src=a;return c},loadEventListener=function(){for(var i=0;i<event_list.length;++i){if(eventMapper.hasOwnProperty(event_list[i])&&eventMapper[event_list[i]].activated){var event=eventMapper[event_list[i]].event,eventHandler=eventMapper[event_list[i]].callback;event=="load"?addOnReadyCallBack(eventHandler):addListener(event,eventHandler)}}loadOnReady()},queueTracker=new TrackerFactory,invocationTracker=new InvocationFactory,genericTracker=new GenericFactory,staticTracker=new StaticFactory,event_list=["link","button","load","form","custom","css"],tracker_list={ga:queueTracker,ta:queueTracker,amadeus:queueTracker,krux:staticTracker,tai:invocationTracker,gen:genericTracker,piwik:queueTracker,sojern:genericTracker,adara:genericTracker,advserver:genericTracker};Array.prototype.indexOf=Array.prototype.indexOf||function(searchElement,fromIndex){var k;if(this==null){throw new TypeError('"this" is null or not defined')}var O=Object(this);var len=O.length>>>0;if(len===0){return -1}var n=+fromIndex||0;if(Math.abs(n)===Infinity){n=0}if(n>=len){return -1}k=Math.max(n>=0?n:len-Math.abs(n),0);while(k<len){var kValue;if(k in O&&O[k]===searchElement){return k}k++}return -1};Action.prototype.check=function(e){for(var x in this.conditions){var value=this.conditions[x],key=x;if(key.indexOf(DL_PREFIX)==0){var varname=key.substr(DL_PREFIX.length),var_value;var_value=loadCustomVar(varname);if(value.indexOf(":")==0){var pattern=new RegExp(value.substr(1));if(!pattern.exec(var_value)){return false}}else{if(value!=var_value){return false}}}else{if(key=="css"){function matchesSelector(selector,element){var nodeList=document.querySelectorAll(selector);for(var e in nodeList){return nodeList[e]===element}return false}if(matchesSelector(this.conditions[x],e.node)==false){return false}}else{if(e.hasOwnProperty(key)){if(Object.prototype.toString.call(Object(value))=="[object String]"){if(value.indexOf(":")==0){var pattern=new RegExp(value.substr(1));if(!pattern.exec(e[key])){return false}}else{if(value!=e[key]){return false}}}else{return false}}else{return false}}}}return true};Action.prototype.execute=function(){this.trackerCallback.execute(this)};TrackerFactory.prototype.init=function(a,data){var loaded=this.loadedList[a],scriptfile;if(!loaded){switch(a){case"ga":scriptfile=addSsl("https://ssl.","http://www.","google-analytics.com/ga.js");this.queue[a]="_gaq";break;case"ta":scriptfile=addSsl("https://","http://","ads.travelaudience.com/js/ta.js");this.queue[a]="_ttq";break;case"amadeus":if(typeof data[0][1]==="string"&&data[0][1].indexOf(".php")>=0){scriptfile=data[0][1].substr(0,data[0][1].indexOf(".php"))+".js"}else{scriptfile=addSsl("https://","http://","trackertst.1aipp.com/piwik.js")}this.queue[a]="_paq";break;case"piwik":if(typeof data[0][1]==="string"&&data[0][1].indexOf(".php")>=0){scriptfile=data[0][1].substr(0,data[0][1].indexOf(".php"))+".js"}else{scriptfile=addSsl("https://","http://","localhost/piwik/piwik.js")}this.queue[a]="_paq";break;default:return}var c=addScript(scriptfile);this.scripts.push(c);this.loadedList[a]=true}};TrackerFactory.prototype.load=function(){var d=document.getElementsByTagName("script")[0];for(var i=0;i<this.scripts.length;i++){d.parentNode.insertBefore(this.scripts[i],d)}};TrackerFactory.prototype.execute=function(action){for(var i=0;i<action.varList.length;i++){var res=[],c=action.varList[i];if(c&&c.length>0){for(var j=0;j<c.length;j++){var v=c[j];if(v.indexOf(DL_PREFIX)==0){var varname=c[j].substr(DL_PREFIX.length);v=loadCustomVar(varname)}if(isInt(v)&&(action.trackerName==="ga")){v=parseInt(Number(v))}if(isInt(v)&&(action.trackerName==="amadeus"||action.trackerName==="piwik")){v=v.toString()}res.push(v)}var q=this.queue.hasOwnProperty(action.trackerName)&&globVar(this.queue[action.trackerName]);q&&q.push(res)}}};InvocationFactory.prototype.init=function(a){switch(a){case"tai":scriptfile=addSsl("https://","http://","ads.travelaudience.com/inv/");break;default:return}var c=addScript(scriptfile);this.scripts[a]=c};InvocationFactory.prototype.load=function(a){};InvocationFactory.prototype.invocate=function(a){if(this.scripts.hasOwnProperty(a)){var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(this.scripts[a],d)}};InvocationFactory.prototype.execute=function(action){for(var i=0;i<action.varList.length;i++){var res=[],c=action.varList[i];if(c&&c.length==2){var k=c[0],v=c[1];if(v.indexOf(DL_PREFIX)==0){var varname=v.substr(DL_PREFIX.length);v=loadCustomVar(varname)}globVar(k,v,1)}else{if(c&&c.length==1&&c[0]=="process"){this.invocate(action.trackerName)}}}};StaticFactory.prototype.init=function(a,data,scriptfile){var c=addScript(addSsl("https://","http://",scriptfile));this.scripts.push(c)};StaticFactory.prototype.load=function(a){for(var i=0;i<this.scripts.length;i++){var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(this.scripts[i],d)}};StaticFactory.prototype.execute=function(action){switch(action.trackerName){case"krux":var datalayer=window._tcDataLayer;var isUserLogged=loadCustomVar("IsUserLogged");if(isUserLogged==true){datalayer.userId=loadCustomVar("TCProfileId")}if(typeof Krux!=="undefined"){Krux("ns:amadeus","page:load",function(err){},"pageView:false")}break;default:return}};GenericFactory.prototype.init=function(a){};GenericFactory.prototype.load=function(a){};GenericFactory.prototype.execute=function(action){var uri=action.script+"?";for(var i=0;i<action.varList.length;i++){var c=action.varList[i],v=c&&(c.length==2?c[1]:c[0]),k=c&&(c.length==2?c[0]:undefined);if(v&&v.indexOf(DL_PREFIX)==0){v=v.substr(DL_PREFIX.length);v=loadCustomVar(v)}if(typeof k!=="undefined"){uri=uri+((uri.slice(-1)=="?")?"":"&")+k+"="+v}else{uri=uri+((uri.slice(-1)=="?")?"":"&")+v}}var scriptfile=encodeURI(uri),c=addScript(scriptfile),d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)};CustomVar.prototype.extract=function(){if(this.selector&&this.selector.type&&this.name&&this.selector.type=="datalayer"){this.value=this.selector&&this.selector.name&&globVar("_tcDataLayer."+this.selector.name,"");return true}if(this.selector&&this.selector.type&&this.name&&this.selector.type=="function"){var tmpValue=this.value.replace(/{(\w+)}/g,function(x,y){return'"'+loadCustomVar(y)+'"'});this.value=eval("var formatFunc="+tmpValue+"; formatFunc();");return true}var node=this.selector&&(this.selector.id?getElemById(this.selector.id):this.selector.name?getElemByName(this.selector.name):this.selector.classname?getElemByClassName(this.selector.classname):null);if(node&&this.selector.type){switch(this.selector.type){case"input":this.value=node.value||"";return true;break;case"select":var option,getVal=function(elem){var val=elem.attributes.value;return !val||val.specified?elem.value:elem.text},index=node.selectedIndex;option=node.options[index];this.value=option&&(index>=0)&&getVal(option)||"";return true;break;case"text":this.value=get_InnerText(node)||"";return true;break}}else{return false}};ns.trigCustomEvent=function(name,_data,keepDL){if(!keepDL||!window.hasOwnProperty("_tcDataLayer")){window._tcDataLayer={}}var datalayer=window._tcDataLayer;for(var key in _data){datalayer[key]=_data[key]}if(typeof document.createEvent!=="undefined"){var event=new CustomEvent("custom1A",{detail:{eventName:name}});document.dispatchEvent(event)}else{if(typeof document.createEventObject!=="undefined"){document.oncustom1A({detail:{eventName:name}})}}};for(var i=0;i<event_list.length;i++){mapped_actions[event_list[i]]=[]}parseActions(action_list,mapped_actions);loadEventListener()})(window.tmpack=window.tmpack||{});(function(){function a(c,d){var b;if(typeof document.createEvent!=="undefined"){d=d||{bubbles:false,cancelable:false,detail:undefined};b=document.createEvent("CustomEvent");b.initCustomEvent(c,d.bubbles,d.cancelable,d.detail)}else{if(typeof document.createEventObject!=="undefined"){}}return b}if(typeof document.createEvent!=="undefined"){a.prototype=window.Event.prototype;window.CustomEvent=a}})();