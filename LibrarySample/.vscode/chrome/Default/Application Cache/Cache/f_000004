define("_generated/Less/MsPortalImpl/Widgets/Widgets.FormDialog.css",["require","exports","module"],function(n,t,i){"use strict";window.fx.injectCss(i,'.fxs-formdialog,.fxs-formdialog h2{font-family:az_ea_font,wf_segoe-ui_normal,"Segoe UI","Segoe WP",Tahoma,Arial,sans-serif}.fxs-formdialog{font-size:14px;border:1px solid}.fxs-formdialog h2{font-size:110%}.fxs-formdialog .fxs-formdialog-description{margin-top:-10px}.fxs-formdialog .fxs-formdialog-form{margin:20px 0 0;padding:15px 25px;width:448px}.fxs-formdialog .fxs-formdialog-buttons{margin-left:25px}.fxs-formdialog .fxs-formdialog-buttons>button{margin-right:5px;margin-bottom:25px}.fxs-formdialog-header{border-bottom:1px solid;margin:0 25px;padding-bottom:10px}')});define("MsPortalImpl/Widgets/Dialogs/Widgets.FormDialog",["require","exports","f","MsPortalImpl.Controls/Fields/Base/FormValidation","../../Interactions/Interactions.DismissHandler","../../Interactions/Interactions.KeyboardNavigation","../Widgets.WidgetBase","../Widgets.Common",
"../../../_generated/Less/MsPortalImpl/Widgets/Widgets.FormDialog.css"],function(n,t,i,r,u,f,e,o){"use strict";var s;return function(n){var c=i.ViewModels,l=c.Controls.Forms.Button.ViewModel,a=c.Forms.Section,v=a.SectionStyle,s=a.ViewModel,y=i.Util.newGuid,p="fxs-formdialog",w="fxs-popup",k="<div class='fxs-formdialog-header fxs-br-default'><h2 data-bind='text: data.dialogOptions.title'><\/h2><div class='fxs-formdialog-description' data-bind='text: data.dialogOptions.description'><\/div><\/div><div class='fxs-formdialog-form msportalfx-form' data-bind='pcControl: func._formSection'><\/div><div class='fxs-formdialog-buttons'><button class='fxs-button-primary fxs-formdialog-okbutton' data-bind='text: data.okButtonText, pcButton: func._okButton'><\/button><button class='fxs-button-default fxs-formdialog-cancelbutton' data-bind='text: data.cancelButtonText, pcButton: func._cancelButton'><\/button><\/div>",t=ko.observable,h=ko.observableArray,d=function(n){function i(){n.apply(this,arguments);
this.okButtonText=t();this.cancelButtonText=t();this.onOkClick=$.noop;this.onCancelClick=$.noop}return __extends(i,n),i}(e.ViewModel),b;n.ViewModel=d;b=function(n){function i(t,i){var r=this,e;if(n.call(this,t,i),this._dismissHandle={dismissFn:function(){r._cancelButton&&r.options.onCancelClick()},shouldDismissOnMouseDownFn:$.noop,shouldDismissOnMouseWheelFn:$.noop,restoreFocus:function(){var n=r._previouslyFocusedElement;u.validatePreviousFocusedElement(r._dismissHandle,n)&&n.focus()},logName:"formdialog"},!i.dialogOptions)throw new Error("dialogOptions must be specified for rendering a form dialog.");t.addClass(p).addClass(w).html(k);this._previouslyFocusedElement=document.activeElement;e=new f.KeyboardNavigation(t,f.TabTrigger.TabKeys);u.register(this._dismissHandle);this.lifetimeManager.registerForDispose(function(){e.dispose();u.unregister(r._dismissHandle)});this._initializeViewModels();this._bindDescendants();this._setAria();this.setFocus()}return __extends(i,n),i.prototype.setFocus=
function(){var n=this.element;o.waitForBindings(n[0]).then(function(){var t=n.find("input"),i;i=t.length===0?n.findByClassName("fxs-formdialog-okbutton")[0]:t[0];i.focus()})},i.prototype.dispose=function(){this._cleanElement(p,w);n.prototype.dispose.call(this)},i.prototype._setAria=function(){var t="aria-labelledby",i="aria-describedby",n=this.element,r=y(),u=y();n.attr("role","alertdialog").attr(t,u).attr(i,r);n.find("h2").attr("id",u);n.findByClassName("fxs-formdialog-description").attr({id:r,role:"document",tabindex:this.options.dialogOptions.description()?0:-1});this.lifetimeManager.registerForDispose(function(){n.removeAttr(["role",t,i].join(" "))})},i.prototype._initializeViewModels=function(){var g=this,n=this.lifetimeManager,a=this.options,i=a.dialogOptions,y=v.Row,u=v.Column,f=new s(n,{style:t(y),children:h()}),e=new s(n,{style:t(y),children:h()}),p,w,b,k,o,d,c;i.row1column1&&(p=new s(n,{style:t(u),children:h([i.row1column1])}),f.children.push(p));i.row1column2&&(w=new s(n,{style:
t(u),children:h([i.row1column2])}),f.children.push(w));i.row2column1&&(b=new s(n,{style:t(u),children:h([i.row2column1])}),e.children.push(b));i.row2column2&&(k=new s(n,{style:t(u),children:h([i.row2column2])}),e.children.push(k));o=this._formSection=new s(n,{children:h()});f.children().length&&o.children.push(f);e.children().length&&o.children.push(e);d=this._cancelButton=new l(n);d.click=function(){a.onCancelClick()};c=this._okButton=new l(n);c.isDefault(!0);c.click=function(){r.ensureFormFieldValidation(g.element,!0).then(function(n){n&&a.onOkClick()})};ko.computed(n,function(){var n=o.valid();c.disabled(!n)})},i}(e.Widget);n.Widget=b}(s||(s={})),s});define("_generated/Less/MsPortalImpl/Widgets/Widgets.ListPopup.css",["require","exports","module"],function(n,t,i){"use strict";window.fx.injectCss(i,".fxs-listpopup{display:inline-block;cursor:default;position:absolute;left:0;width:200px;max-height:300px;z-index:200;overflow-y:auto;box-sizing:border-box}.fxs-listpopup .fxs-listpopup-list{list-style-type:none;margin:10px;padding:0;max-height:300px}.fxs-listpopup .fxs-listpopup-list .fxs-listpopup-item{padding:3px 10px 5px;height:22px;max-height:22px;line-height:22px;margin:0;cursor:pointer;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.fxs-listpopup .fxs-listpopup-list .fxs-listpopup-item.fxs-listpopup-item-selected{padding-right:10px;padding-left:7px;border-left-width:3px;border-left-style:solid}")}
);define("MsPortalImpl/Widgets/Dialogs/Widgets.ListPopup",["require","exports","f","../../Interactions/Interactions.DismissHandler","../../Interactions/Interactions.KeyboardNavigation","../../Base/Base.KeyboardHelper","../Widgets.WidgetBase","../../../_generated/Less/MsPortalImpl/Widgets/Widgets.ListPopup.css"],function(n,t,i,r,u,f,e){"use strict";var o;return function(t){var c=i.Base,l=c.Diagnostics,o="fxs-listpopup",a=l.createLog(n),s="fxs-popup",v="<ul class='fxs-listpopup-list' data-bind='foreach: func._items'><li role='menuitem' class='fxs-listpopup-item fxs-has-hover' data-bind='text: text, css: { \"fxs-listpopup-item-selected fxs-is-selected fxs-br-primary\": text === $root.data.dialogOptions.selectedItem() }, event: { click: onClick, keydown: onKeyDown }, attr: { title: text }' tabindex='0'><\/li><\/ul>",y=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(e.ViewModel),h;t.ViewModel=y;h=function(n){function t(t,i){var e=this,h;n.call(this,t,i);i.dialogOptions||
a.error("dialogOptions must be specified for rendering a list popup.");this._previouslyFocusedElement=document.activeElement;this._items=ko.computed(this.lifetimeManager,function(){var t=i.dialogOptions.listItems(),n=function(n){typeof i.onItemSelected=="function"&&(i.dialogOptions.selectedItem(n),i.onItemSelected(),e._dismissHandle.restoreFocus())};return t.map(function(t){return{text:t,onClick:function(i,r){r.stopPropagation();n(t)},onKeyDown:function(i,r){r.keyCode===13&&f.getModifierKeys(r)===0&&(r.stopPropagation(),n(t))}}})});h=function(n){var t=e.element[0];return!(t===n)&&!$.contains(t,n)};this._dismissHandle={dismissFn:function(){e.options.onLostFocus&&e.options.onLostFocus()},shouldDismissOnMouseDownFn:h,shouldDismissOnMouseWheelFn:h,restoreFocus:function(){r.validatePreviousFocusedElement(e._dismissHandle,e._previouslyFocusedElement)&&e._previouslyFocusedElement.focus()},logName:"listpopup"};this._keyboardNavigation=new u.KeyboardNavigation(t);r.register(this._dismissHandle);
t.addClass([o,s].join(" ")).html(v);this._bindDescendants();t.findFirstTabbable().focus()}return __extends(t,n),t.prototype.dispose=function(){r.unregister(this._dismissHandle);this._cleanElement(o,s);this._keyboardNavigation&&(this._keyboardNavigation.dispose(),this._keyboardNavigation=null);this.element.removeAttr("tabindex");n.prototype.dispose.call(this)},t}(e.Widget);t.Widget=h}(o||(o={})),o});define("_generated/Less/MsPortalImpl/Widgets/Widgets.MessageBox.css",["require","exports","module"],function(n,t,i){"use strict";window.fx.injectCss(i,'.fxs-messagebox,.fxs-messagebox h2,.fxs-progressbox,.fxs-progressbox h2{font-family:az_ea_font,wf_segoe-ui_normal,"Segoe UI","Segoe WP",Tahoma,Arial,sans-serif}.fxs-commandBar-form{padding:0}.fxs-messagebox,.fxs-progressbox{font-size:14px;box-sizing:border-box;border:1px solid}.fxs-messagebox h2,.fxs-progressbox h2{font-size:110%;padding:24px 27px 7px;margin:0;line-height:14px;border-bottom:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.fxs-messagebox .fxs-messagebox-html,.fxs-messagebox .fxs-messagebox-text,.fxs-messagebox .fxs-progressbox-text,.fxs-progressbox .fxs-messagebox-html,.fxs-progressbox .fxs-messagebox-text,.fxs-progressbox .fxs-progressbox-text{padding:0 27px;word-wrap:break-word}.fxs-messagebox .fxs-progressbox-progressbar,.fxs-progressbox .fxs-progressbox-progressbar{padding:7px 27px 24px}.fxs-messagebox .fxs-messagebox-buttons,.fxs-progressbox .fxs-messagebox-buttons{border-top:1px solid}.fxs-messagebox .fxs-messagebox-buttons button,.fxs-progressbox .fxs-messagebox-buttons button{margin-right:5px}.fxs-messagebox .msportalfx-form,.fxs-progressbox .msportalfx-form{padding:0;margin:27px 0 0}.fxs-messagebox .msportalfx-form div,.fxs-progressbox .msportalfx-form div{padding:15px 27px}.fxs-messagebox-confirmation{padding:10px 27px 0;display:block}.fxs-messagebox-confirmation input{vertical-align:-2px}')}
);define("_generated/Less/MsPortalImpl/Widgets/Widgets.ProgressBox.css",["require","exports","module"],function(n,t,i){"use strict";window.fx.injectCss(i,'.fxs-progressbox{font-family:az_ea_font,wf_segoe-ui_normal,"Segoe UI","Segoe WP",Tahoma,Arial,sans-serif;color:#fff}')});define("MsPortalImpl/Widgets/Dialogs/Widgets.ProgressBox",["require","exports","MsPortalImpl/Resources/ImplScriptResources","../Widgets.WidgetBase","../../../_generated/Less/MsPortalImpl/Widgets/Widgets.MessageBox.css","../../../_generated/Less/MsPortalImpl/Widgets/Widgets.ProgressBox.css"],function(n,t,i,r){"use strict";var u;return function(n){var c=window,l=jQuery,o=i.Dialogs.ProgressBar,u="fxs-progressbox",s="<h2 data-bind='text: data.title' class='fxs-progressbox-title'><\/h2><div data-bind='text: data.text' class='fxs-progressbox-text'><\/div><div data-bind='text: data.completionText' class='fxs-progressbox-progressbar'><\/div>",f="fxs-popup",t=ko.observable,h=function(n){function i(i,r){var u=this;n.call(this);
this.title=t();this.text=t();this.completionPercentage=t(-1);ko.isObservable(i)&&(this.text=i);ko.isObservable(r)&&(this.completionPercentage=r);this.completionText=ko.computed(function(){var n=u.completionPercentage();return n<0||n>100?"":o.percentComplete.format(n)})}return __extends(i,n),i}(r.ViewModel),e;n.ViewModel=h;e=function(n){function t(t,i){n.call(this,t,i);this.element.html(s).addClass(u).addClass(f);this._bindDescendants()}return __extends(t,n),t.prototype.dispose=function(){this._cleanElement(u,f);n.prototype.dispose.call(this)},t}(r.Widget);n.Widget=e}(u||(u={})),u});define("MsPortalImpl/Widgets/Dialogs/Widgets.MessageBox",["require","exports","f","MsPortalImpl/Resources/ImplScriptResources","../../Interactions/Interactions.DismissHandler","../../Interactions/Interactions.KeyboardNavigation","../Widgets.WidgetBase","../../../_generated/Less/Viva.Controls/Controls/Forms/Viva.Button.css","../../../_generated/Less/MsPortalImpl/Widgets/Widgets.MessageBox.css"],function(n,t,i,
r,u,f,e){"use strict";var o;return function(t){function o(n){return"button[value='"+n+"']"}function oi(n){var i=n.closest("."+s),t;i.length>0&&(t=e.Widget.getWidget(i,p),t.cancelButton&&t.cancelButton.click())}function si(n){var i=n.closest("."+s),t;i.length>0&&(t=e.Widget.getWidget(i,p),t.options.confirmationRequired?t.element.find("input").focus():t.defaultButton&&t.defaultButton.focus())}var tt=i.Base,yt=tt.Diagnostics,it=tt.EventTypes,rt=i.ViewModels.Dialogs,c=rt.DialogResult,l=rt.MessageBoxButtons,hi=window,h=jQuery,pt=yt.createLog(n),ut=i.Util.newGuid,a=r.Dialogs.ButtonText,ft="fxs-accent",w="azc-button",wt="fxs-button-primary",et="fxs-button-default",s="fxs-messagebox",bt=s+"-title",b=s+"-text",ci=s+"-html",kt=s+"-buttons",dt=s+"-confirmation",gt='<h2 data-bind="text: data.title" class="'+bt+' msportalfx-tooltip-overflow"><\/h2><!-- ko if: data.modal -->'+('<div data-bind="sanitizedHtml: data.text" class="'+b+'"><\/div>')+"<!-- /ko --><!-- ko ifnot: data.modal -->"+('<div data-bind="text: data.text" class="'+
b+'"><\/div>')+"<!-- /ko --><!-- ko if: data.confirmationRequired -->"+('<label class="'+dt+"\"><input type=\"checkbox\" data-bind='checked: func._confirmed'><span data-bind='sanitizedHtml: data.confirmationMessage'><\/span><\/label>")+"<!-- /ko -->"+('<div data-bind="jqueryAppend: func._getButtonHtml(data.buttons())" class="'+["msportalfx-form",kt,"fxs-has-border"].join(" ")+'"><\/div>'),ot="<button value='ok'>"+a.ok+"<\/button>",st="<button value='retry'>"+a.retry+"<\/button>",k="<button value='cancel'>"+a.cancel+"<\/button>",ht="<button value='yes'>"+a.yes+"<\/button>",ct="<button value='no'>"+a.no+"<\/button>",ni="<div><button value='abort'>"+a.abort+"<\/button>"+st+"<button value='ignore'>"+a.ignore+"<\/button><\/div>",ti="<div>"+ot+"<\/div>",ii="<div>"+ot+k+"<\/div>",ri="<div>"+st+k+"<\/div>",ui="<div>"+ht+ct+"<\/div>",fi="<div>"+ht+ct+k+"<\/div>",v=ko.observable,lt="abort",at="retry",ei="ignore",d="ok",y="cancel",g="yes",nt="no",vt,p;t.cancelMessageBox=oi;t.setFocusOnMessageBox=
si;vt=function(n){function t(){n.apply(this,arguments);this.title=v();this.text=v();this.modal=!1;this.buttons=v(l.OK);this.confirmationRequired=!1}return __extends(t,n),Object.defineProperty(t.prototype,"onButtonClick",{get:function(){return this._buttonClick},set:function(n){if(this._buttonClick)throw new Error("The onButtonClick callback has already been set.");this._buttonClick=n},enumerable:!0,configurable:!0}),t}(e.ViewModel);t.ViewModel=vt;p=function(n){function t(t,i){var r=this;n.call(this,t,i);this._validateForDismiss=function(n){var t=r.element[0];return!r.options.modal&&!(t===n)&&!h.contains(t,n)};this._dismissHandle={dismissFn:function(){r.cancelButton&&r.cancelButton.click()},shouldDismissOnMouseDownFn:this._validateForDismiss,shouldDismissOnMouseWheelFn:this._validateForDismiss,restoreFocus:function(){u.validatePreviousFocusedElement(r._dismissHandle,r._previouslyFocusedElement)&&r._previouslyFocusedElement.focus()},logName:"messagebox"};this._confirmed=v();t.html(gt).addClass(
s).addClass(ft);this._attachEventHandlers();this._previouslyFocusedElement=document.activeElement;this._bindDescendants();this._setAria();this.defaultButton&&this.defaultButton.addClass(w).addClass(wt).focus();this.cancelButton&&this.cancelButton.addClass(w).addClass(et);this.noButton&&this.noButton.addClass(w).addClass(et);this._confirmed(!i.confirmationRequired);ko.reactor(this.lifetimeManager,function(){var n=r._confirmed();r.defaultButton&&r.defaultButton.toggle(n)})}return __extends(t,n),t.prototype.dispose=function(){this._cleanElement(s,ft);n.prototype.dispose.call(this)},t.prototype._getButtonHtml=function(n){var i=this.options,t,r;switch(n){case l.AbortRetryIgnore:t=h(ni);this.cancelButton=t.find(o(lt));break;case l.OK:t=h(ti);this.defaultButton=this.cancelButton=t.find(o(d));break;case l.OKCancel:t=h(ii);this.defaultButton=t.find(o(d));r=this.cancelButton=t.find(o(y));break;case l.RetryCancel:t=h(ri);this.defaultButton=t.find(o(at));this.cancelButton=t.find(o(y));break;case l.
YesNo:t=h(ui);this.defaultButton=t.find(o(g));this.cancelButton=t.find(o(nt));break;case l.YesNoCancel:t=h(fi);this.defaultButton=t.find(o(g));this.cancelButton=t.find(o(y));this.noButton=t.find(o(nt));break;default:throw new Error("Could not locate message box button of type {0}.".format(n));}return this.defaultButton&&this.defaultButton.length&&i.defaultButtonText&&this.defaultButton.text(i.defaultButtonText),r&&r.length&&i.cancelButtonText&&r.text(i.cancelButtonText),t},t.prototype._setAria=function(){var t="aria-labelledby",i="aria-describedby",n=this.element,r=ut(),u=ut();n.attr("role","alertdialog").attr(t,u).attr(i,r);n.find("h2").attr("id",u);n.findByClassName(b).attr({id:r,role:"document",tabindex:0});this.lifetimeManager.registerForDispose(function(){n.removeAttr(["role",t,i].join(" "))})},t.prototype._attachEventHandlers=function(){var n=this,t=this.element,i,r;t.on(it.click,"button",i=function(t,i){n._buttonHandler(t,i);n._dismissHandle.restoreFocus()});r=new f.KeyboardNavigation(
t,f.TabTrigger.TabKeys);u.register(this._dismissHandle);this.lifetimeManager.registerForDispose(function(){t.off(it.click,"button",i);r.dispose();u.unregister(n._dismissHandle)})},t.prototype._buttonHandler=function(n){var i=h(n.target).attr("value"),t;switch(i){case lt:t=c.Abort;break;case y:t=c.Cancel;break;case ei:t=c.Ignore;break;case nt:t=c.No;break;case d:t=c.Ok;break;case at:t=c.Retry;break;case g:t=c.Yes;break;default:pt.error("Unknown command message box button was clicked. Button value is {0}.".format(i));return}if(typeof this.options.onButtonClick=="function")this.options.onButtonClick(t)},t}(e.Widget);t.Widget=p}(o||(o={})),o});define("MsPortalImpl/UI/UI.DialogManager",["require","exports","f","../Widgets/Dialogs/Widgets.FormDialog","../Widgets/Dialogs/Widgets.ListPopup","../Widgets/Dialogs/Widgets.ProgressBox","../Generated/SvgStartupDefinitions","../Base/Telemetry","./Compositions/UI.Composition","../Widgets/Widgets.WidgetBase","../Widgets/Dialogs/Widgets.MessageBox"],function(
n,t,i,r,u,f,e,o,s,h,c){"use strict";var l;return function(t){function l(n){return bt.format(n)}function kt(n){return b||(b=new st(n)),b}function dt(){b=null}function ot(n,t){var r=i.getUniqueId();return n.replaceAll(t,r).replaceAll("msportalfx-svg-c01",t).replaceAll(r,"msportalfx-svg-c01")}function gt(n,t,i){var r=new c.ViewModel;return r.title(t.title),r.text(t.text),r.buttons(t.buttons),r.onButtonClick=function(t){n(t)},r.modal=i,r.defaultButtonText=t.defaultButtonText,r.cancelButtonText=t.cancelButtonText,r.confirmationRequired=t.confirmationRequired,r.confirmationMessage=t.confirmationMessage,r}function ni(n,t){var i=new f.ViewModel(t.text,t.completionPercentage);return i.title(t.title),i}function ti(n,t){var i=new r.ViewModel;return i.dialogOptions=t,i.okButtonText(tt.okButtonText),i.cancelButtonText(tt.cancelButtonText),i.onOkClick=function(){n(y.Ok)},i.onCancelClick=function(){n(y.Cancel)},i}function ii(n,t){var i=new u.ViewModel;return i.dialogOptions=t,i.onItemSelected=function(
){n(y.Ok)},i}function ht(n){var t=n.closest(".fxs-tile").data(s.CompositionInstanceDataName),i;return t&&s.isPartComposition(t)?i=t.locator:vt.error("Unable to determine the extension that opened the dialog. "+at.getCurrentCallStack(!0)),i}function ct(n){var r=n.closest(".fxs-blade"),t=h.Widget.getWidgets(r),i;return t&&t.length&&(i=t[0],n=w(i.getForm())),n}function lt(n){nt.trace({source:ut,name:n&&n.toFriendlyString(),action:ft.DialogOpened,extension:n&&n.getExtensionLocator().name})}function v(n,t){nt.trace({source:ut,name:n&&n.toFriendlyString(),action:ft.DialogClosed,extension:n&&n.getExtensionLocator().name,data:t})}var p=i.Base,g=p.Diagnostics,nt=g.Telemetry,at=p.Utilities,tt=i.Resources.Strings.Dialogs,k=i.ViewModels.Dialogs,y=k.DialogResult,a=k.DialogType,it=e.Content.SvgStartup,ri=window,w=jQuery,d=w("body"),vt=g.createLog(n),yt="<div class='fxs-portal-shield'><div class='fxs-portal-shield-icon fxs-portal-shield-icon-on-topbar'><\/div><div class='fxs-portal-shield-modaldialog'><div/><\/div><\/div>",
rt=40,pt="fxs-portal-shield-icon-warning",wt="fxs-portal-shield-icon-error",bt="The {0} used to render the dialog was not specified.",ut=o.Source.Shell,ft=o.Action,b,et=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t}(k.MessageBox),st;t.MessageBox=et;t.getOrCreate=kt;t.dispose=dt;st=function(){function n(n){this._portalIdleSvc=n}return Object.defineProperty(n.prototype,"hasOpenDialog",{get:function(){return!!this._dismissOpenDialog},enumerable:!0,configurable:!0}),n.prototype.dismissOpenDialog=function(){this._dismissOpenDialog&&(this._dismissOpenDialog(),this._dismissOpenDialog=null)},n.prototype.showModalDialog=function(n){var e=this,t=w(yt),i,c,o,u,s,r,h,l,f;return d.append(t),i=t.findByClassName("fxs-portal-shield-icon"),c=t.findByClassName("fxs-portal-shield-modaldialog"),n.showErrorIcon?(o=ot(it.error.data,"msportalfx-svg-c22"),u=wt):(o=ot(it.warning.data,"msportalfx-svg-c10"),u=pt),i.html(o),i.addClass(u),s=d.findByClassName("fxs-topbar-content").width(),
r=d.findByClassName("fxs-topbar-notifications").position(),s&&r&&(h=s-(r.left+rt),i.css({top:r.top,right:h}),c.css({top:r.top+rt,right:h})),this._currentCancelToken&&(this._currentCancelToken.cancel(),this._currentCancelToken=null),l=t.find(".fxs-portal-shield-modaldialog > div"),f=new et(n.title,n.description,n.buttons),f.defaultButtonText=n.defaultButtonText,f.cancelButtonText=n.cancelButtonText,t.show(),this._portalIdleSvc.signalIdle(),this._showDialog(l,f,!0,null).then(function(r){var f=n.uiShield&&n.uiShield.hidePromise;return f?(e._currentCancelToken=new p.Promises.CancelationToken,p.Promises.wrapWithCancelablePromise(f,e._currentCancelToken).then(function(){t.hide()})):t.hide(),i.removeClass(u),r}).finally(function(){e._portalIdleSvc.signalBusy()})},n.prototype.showDialog=function(n,t,i){return n?t?(this.dismissOpenDialog(),this._showDialog(n,t,!1,i)):Q.reject(l("options")):Q.reject(l("element"))},n.prototype.showDialogWithCallback=function(n,t,i,r){if(!n)throw new Error(l("element"));
if(!t)throw new Error(l("options"));this.dismissOpenDialog();this._showDialogWithCallback(n,t,!1,i,r)},n.prototype.showShellDialog=function(n,t,r){var u=this;return t?r?n?(this.dismissOpenDialog(),i.require("MsPortalImpl.Controls/Controls/Balloon").then(function(i){var f=u._showDialog(w(t.getForm()),n,!0,null).then(function(n){return t.hideForm(),n}),e=i.getBox(r);return t.showForm(e),f})):Q.reject(l("options")):Q.reject(l("sourceTarget")):Q.reject(l("formTarget"))},n.prototype._showDialog=function(n,t,i,r){var e=this,u=Q.defer(),o=function(n){u.resolve(n)},f;return r||i||(r=ht(n)),t.type!==a.List&&(n=ct(n)),f=this._getWidget(n,t,i,o),lt(r),f?(this._dismissOpenDialog=function(){f.dispose();u.reject();v(r,"Dismissed")},u.promise.then(function(n){f.dispose();e._dismissOpenDialog=null;v(r,y[n])})):(v(r,"InvalidDialogType"),u.reject("Invalid type specified in dialogOptions.")),u.promise},n.prototype._showDialogWithCallback=function(n,t,i,r,u){var o=this,f,e;u||i||(u=ht(n));t.type!==a.List&&
(n=ct(n));e=function(n){f&&f.dispose();o._dismissOpenDialog=null;v(u,y[n]);r&&r(n)};f=this._getWidget(n,t,i,e);lt(u);f?this._dismissOpenDialog=function(){f.dispose();v(u,"Dismissed")}:v(u,"InvalidDialogType")},n.prototype._getWidget=function(n,t,i,e){var h=this,o,s;switch(t.type){case a.MessageBox:o=new c.Widget(n,gt(e,t,i));break;case a.ProgressBox:o=new f.Widget(n,ni(null,t));break;case a.List:s=ii(e,t);s.onLostFocus=function(){h.dismissOpenDialog()};o=new u.Widget(n,s);break;case a.Form:o=new r.Widget(n,ti(e,t))}return o},n}()}(l||(l={})),l})